<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 198 - Tricycle Simulation</title>

    <!-- Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
        integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
        crossorigin=""
    />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
        integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
        crossorigin=""
    >
    </script>

    <!-- Bootstrap CSS and JS -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
        crossorigin="anonymous"
    >
    <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
        crossorigin="anonymous"
    >
    </script>

    <!-- Map CSS-->
    <link rel="stylesheet" href="css/map.css"/>

    <!-- FontAwesome CSS -->
    <link 
        rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer" 
    />
</head>
<body>
    <div id="map"></div>
    <div id="frameCounter">Frame: 0</div>
    <div class="tabbed-container">
        <div class="tab-header">
            <button class="tab-button active" data-tab="event-log">EVENT LOG</button>
            <button class="tab-button" data-tab="passenger-status">PASSENGER STATUS</button>
            <button class="tab-button" data-tab="tricycle-status">TRICYCLE STATUS</button>
            <button class="tab-button" data-tab="metadata">METADATA</button>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="event-log">
                <div class="event-log" id="eventLog"></div>
            </div>
            <div class="tab-pane" id="passenger-status">
                <div id="passengerStatus"></div>
            </div>
            <div class="tab-pane" id="tricycle-status">
                <div id="tricycleStatus"></div>
            </div>
            <div class="tab-pane" id="metadata">
                <div id="metadataContent"></div>
            </div>
        </div>
    </div>

    <!-- Initialize map first -->
    <script type="module">
        import { initializeMap } from './js/map.js';
        window.map = initializeMap();
    </script>

    <!-- Load other scripts after map is initialized -->
    <script src="js/config.js" type="module"></script>
    <script src="js/managers.js" type="module"></script>
    <script src="js/event_processor.js" type="module"></script>
    <script src="js/moving_marker.js" type="module"></script>
    <script src="js/map.js" type="module"></script>
</body>
</html>